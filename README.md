# Telegram Question Bot

Telegram-бот для проведения one-to-one встреч, который предоставляет случайные вопросы из различных категорий. Бот построен на базе [aiogram 3.x](https://docs.aiogram.dev/).

## Функциональность

- **Вывод списка разделов:** При старте бот отправляет сообщение с инлайн-кнопками для каждого раздела
- **Случайный вопрос:** При выборе раздела бот отправляет случайный вопрос
- **Кнопка с рейтингом:** Под каждым вопросом есть кнопка с рейтингом, ведущая на источник

## Структура проекта

```
src/
  bot/
    __init__.py
    config.py      # Конфигурация и константы
    handlers.py    # Обработчики команд
    parser.py      # Парсинг вопросов
    main.py        # Точка входа
requirements.txt
```

## Требования

- Python 3.8+
- Зависимости из requirements.txt:
  - aiogram >= 3.0.0
  - requests >= 2.28.0
  - beautifulsoup4 >= 4.11.0

## Установка и запуск

1. **Клонируйте репозиторий:**
```bash
git clone https://github.com/yourusername/one-to-one-bot.git
cd one-to-one-bot
```

2. **Создайте и активируйте виртуальное окружение:**
```bash
python -m venv venv
source venv/bin/activate  # Linux/MacOS
# или
venv\Scripts\activate     # Windows
```

3. **Установите зависимости:**
```bash
pip install -r requirements.txt
```

4. **Настройка:**
- Скопируйте файл `.env.example` в `.env`:
```bash
cp .env.example .env
```
- Отредактируйте `.env` файл, добавив ваш токен Telegram-бота в переменную `TELEGRAM_API_TOKEN`

5. **Запуск бота:**
```bash
# Стандартный запуск (использует кэшированные вопросы из JSON):
python -m src.bot.main

# Загрузка свежих вопросов с сайта:
python -m src.bot.main --load_questions
```

## Использование

1. Найдите бота в Telegram и отправьте команду `/start`
2. Выберите интересующий раздел из списка
3. Получите случайный вопрос из выбранного раздела
4. Нажмите на кнопку с рейтингом под вопросом, чтобы перейти к полному списку вопросов

## Кэширование вопросов

Бот использует JSON-файл для кэширования вопросов, чтобы избежать частых запросов к веб-сайту. Файл кэша хранится в `src/bot/data/questions.json`.

- При стандартном запуске бот использует кэшированные вопросы из JSON-файла
- Если JSON-файл отсутствует, бот загрузит вопросы с сайта и создаст кэш
- Для обновления кэша используйте флаг `--load_questions`

## Разработка

### Добавление нового раздела

Для добавления нового раздела с вопросами:

1. Добавьте новую секцию в `SECTIONS` в файле `src/bot/config.py`:
```python
SECTIONS: Dict[str, Section] = {
    "new_section": {
        "title": "Название раздела",
        "url": "URL источника вопросов",
        "questions": []
    },
    # ...
}
```

### Логирование

Бот использует стандартный модуль `logging` Python. Все важные события логируются с уровнем INFO.

## Лицензия

MIT